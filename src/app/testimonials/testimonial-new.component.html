<div class="new-back">

  <div class="new-header">
    <div class="container">
      <h1>
        Post a Testimonial:
      </h1>
      <h4>
        Let us know what you think about Evan's hair cutting services
      </h4>
      <p class="mt-3">
        <a routerLink="/testimonials"><button class="btn btn-outline-secondary btn-sm">Back to testimonials</button></a>
      </p>
    </div>
  </div>

  <div class="new-main">
    <div class="container">
      <div class="row">

        <div class="col-md-6">
          <div class="container">
            <h2 class="text-center pb-3">
              Testimonial posting:
            </h2>

            <p>
              We would love to hear from you. Please let us know what you think about the haircut you received from Evan.
            </p>
            <div class="card card-shadow-hard pt-4 py-2 px-2 mb-5">
              <div class="container">
                <form (ngSubmit)="submit(testimonialForm.value)" #testimonialForm="ngForm">
                  <div class="form-group">
                    <label for="content">Testimonial content</label>
                    <div [hidden]="content.valid || content.pristine" class = 'alert alert-danger'>
                      Content is required to post your testimonial.
                    </div>
                    <textarea rows="10"
                              class="form-control"
                              id="content"
                              placeholder="You can write any testimonial here."
                              required
                              name="content"
                              #content='ngModel'
                              [(ngModel)]="testimonial.content"
                    ></textarea>
                    <div *ngIf="isAdmin()" class="mt-3">
                      <input type="text"
                             class="form-control"
                             id="custom_user"
                             placeholder="Anonymous"
                             required
                             name="custom_user"
                             #title='ngModel'
                             [(ngModel)]="testimonial.custom_user"
                      >
                    </div>
                  </div>

                  <button type="submit"
                    class="btn btn-primary btn-lg w-100 mt-4 mb-3"
                    [disabled]="!testimonialForm.form.valid"
                    [hidden]="submitted"
                  >
                    Post Testimonial
                  </button>

                  <div [hidden]="!submitted">
                    <p class="alert alert-success mt-4" role="alert">
                      Thank you for your testimonial! Your testimonial is being posted.
                    </p>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <div class="container">
            <h3 class="text-center pb-3">
              Testimonial will show as follows:
            </h3>
            <div *ngIf="testimonial.content;
                  else no_post" class="text-center testimonial">
              <blockquote class="blockquote-no-hover">
                <p>
                  <span class="text-output-format">{{testimonial.content}}</span>
                </p>

                <div class="quote-signature">
                  <span *ngIf="isAdmin();
                         else no_admin">
                    <em *ngIf="testimonial.custom_user">
                      &nbsp;&#9472;
                      {{testimonial.custom_user}}
                    </em>
                  </span>
                  <ng-template #no_admin>

                    <em>
                      &nbsp;&#9472; {{testimonialUser.user_name}}
                    </em>
                  </ng-template>
                </div>
              </blockquote>
            </div>

            <ng-template #no_post>
              <p class='alert alert-danger pl-5 mt-3'>
                No testimonial data entered. Please type something in.
              </p>
            </ng-template>

          </div>
        </div>

      </div>
    </div>
  </div>
</div>